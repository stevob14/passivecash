<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Useful financial calculators including compound interest, inflation adjustment, mortgage payments, and portfolio rebalancing tools from PassiveCash.xyz.">
    <title>Financial Calculators - PassiveCash.xyz</title>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Q203YEXP0D"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-Q203YEXP0D');
    </script>
    <style>
        body {
            font-family: 'Courier New', Courier, monospace; /* Monospace font */
            margin: 0;
            padding: 0;
            background-color: #0a0a0a; /* Dark background */
            color: #e0e0e0; /* Light grey text */
            line-height: 1.6;
        }
        .navbar {
            background-color: #1a1a1a; /* Darker navbar */
            padding: 10px 0;
            color: #00ff00; /* Green text */
            border-bottom: 1px solid #00ff00; /* Green border */
            position: relative; /* Needed for absolute positioning of mobile menu */
        }
        .navbar .container {
             display: flex;
             justify-content: space-between;
             align-items: center;
             max-width: 960px; /* Limit navbar content width */
             margin: auto; /* Center navbar content */
             padding: 0 15px; /* Padding for navbar content */
        }
         .navbar .logo {
             color: #00ff00; /* Green logo */
             text-decoration: none;
             font-size: 1.5em;
             font-weight: bold;
             z-index: 10; /* Ensure logo is above mobile menu */
         }
        /* Hamburger Button Styles */
        #hamburger-btn {
            display: none; /* Hidden by default */
            background: none;
            border: none;
            color: #00ff00;
            font-size: 2em;
            cursor: pointer;
            padding: 0 5px;
            z-index: 10; /* Ensure button is above mobile menu */
        }
        #hamburger-btn .bar {
            display: block;
            width: 25px;
            height: 3px;
            margin: 5px auto;
            background-color: #00ff00;
            transition: all 0.3s ease-in-out;
        }

        /* Desktop Navigation Styles */
        .navbar ul#nav-links {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex; /* Display links horizontally by default */
        }
        .navbar ul#nav-links li {
            margin-left: 20px;
        }
        .navbar ul#nav-links li a {
            color: #00ff00; /* Green links */
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background-color 0.3s, color 0.3s; /* Smooth transition */
        }
        .navbar ul#nav-links li a:hover,
        .navbar ul#nav-links li a.active {
            background-color: #00ff00; /* Green background on hover/active */
            color: #0a0a0a; /* Dark text on hover/active */
        }
        .container { /* Container for navbar content */
            max-width: 960px;
            margin: auto;
            padding: 0 15px; /* Padding for navbar content on smaller screens */
            /* Remove background/shadow/border-radius from navbar container */
        }

         /* Advertisement Bar Styles */
         #advertisement {
             background-color: #333; /* Dark grey background */
             color: #ffa500; /* Orange text color (default, overridden by link style) */
             padding: 8px 0;
             text-align: center;
             font-size: 0.9em;
             border-bottom: 1px solid #555;
         }
         #advertisement a {
             color: #ffa500 !important; /* Ensure link color overrides default */
             text-decoration: underline;
         }
         #advertisement a:hover {
             color: #ffc966 !important; /* Lighter orange on hover */
         }

         .content-container { /* Container for page content */
             max-width: 960px;
             margin: 20px auto;
             background: #1f1f1f; /* Slightly lighter dark background */
             padding: 30px;
             border-radius: 0px; /* Sharp corners */
             border: 1px solid #00ff00; /* Green border */
             box-shadow: 0 0 10px rgba(0, 255, 0, 0.3); /* Green glow effect */
             color: #e0e0e0; /* Ensure text color is light */
         }
        h1 {
            color: #00ff00; /* Green headings */
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 0 0 5px #00ff00; /* Green text glow */
        }
         h2 {
             color: #00ff00; /* Green headings */
             border-bottom: 1px solid #00ff00; /* Green border */
             padding-bottom: 5px;
             text-shadow: 0 0 3px #00ff00; /* Green text glow */
         }
         /* Calculator Styles (Shared) */
         .calculator-section {
             background-color: #2a2a2a; /* Dark background for calc section */
             padding: 20px;
             border-radius: 0px; /* Sharp corners */
             margin-top: 20px;
             margin-bottom: 30px;
             border: 1px dashed #00ff00; /* Dashed green border */
             color: #e0e0e0; /* Ensure text is light */
             display: none; /* Hide calculators by default */
         }
         .calculator-section.active {
             display: block; /* Show the active calculator */
         }
         /* --- Calculator Selector --- */
         #calculator-selector-container {
             margin-bottom: 30px;
             text-align: center;
             position: relative; /* Needed for absolute positioning of menu */
         }

         /* Styles for Dropdown (Now applies to all sizes) */
         #calculator-selector-container {
             text-align: left; /* Align trigger button left */
         }
         #calculator-menu-trigger {
             display: inline-block; /* Show trigger */
             width: 100%; /* Make trigger full width */
             text-align: center; /* Center text in trigger */
             margin-bottom: 5px;
             /* Inherits .calculateBtn styles, ensure overrides below if needed */
         }
         #calculator-menu {
             display: none; /* Hide menu by default */
             position: absolute;
             top: 100%; /* Position below trigger */
             left: 0;
             width: 100%;
             background-color: #1a1a1a; /* Dark background for dropdown */
             border: 1px solid #00ff00; /* Green border */
             z-index: 50; /* Ensure it's above other content */
             padding: 5px 0;
             box-shadow: 0 4px 8px rgba(0, 255, 0, 0.2); /* Subtle green shadow */
         }
         #calculator-menu.active {
             display: block; /* Show menu when active */
         }
         #calculator-menu .calculator-option {
             display: block; /* Stack options vertically */
             width: 100%;
             margin: 0; /* Remove horizontal margin */
             padding: 10px 15px; /* Padding for options */
             text-align: left; /* Align text left */
             border: none;
             border-bottom: 1px solid #333; /* Separator */
             border-radius: 0; /* Remove radius from base button style */
             font-size: 1em; /* Reset font size */
             /* Inherits .calculateBtn styles, ensure overrides below if needed */
         }
          #calculator-menu .calculator-option:last-child {
              border-bottom: none; /* Remove border from last item */
          }
         /* Style for the selected option in the dropdown */
         #calculator-menu .calculator-option.active-selector {
             background-color: #00ff00; /* Green background */
             color: #0a0a0a; /* Dark text */
             cursor: default;
         }
         /* Removed extra closing brace from previous line 109 */
         .calc-row {
             margin-bottom: 15px;
             display: flex;
             align-items: center;
             flex-wrap: wrap;
         }
         .calc-row label {
             flex-basis: 250px;
             margin-right: 10px;
             font-weight: bold;
             color: #00ff00; /* Green labels */
         }
         .calc-row input[type="number"],
         .calc-row input[type="text"],
         .calc-row select {
             flex-grow: 1;
             padding: 8px;
             border: 1px solid #444; /* Default dark grey border */
             border-radius: 0px; /* Sharp corners */
             min-width: 100px;
             background-color: #111; /* Very dark input background */
             color: #e0e0e0; /* Light text in input */
         }
         .calc-row input[type="number"]:focus,
         .calc-row input[type="text"]:focus,
         .calc-row select:focus {
             border-color: #00ff00; /* Green border on focus */
             outline: none; /* Remove default browser outline */
             box-shadow: 0 0 5px rgba(0, 255, 0, 0.5); /* Add subtle green glow on focus */
         }
          .calc-row small {
             flex-basis: 100%;
             margin-left: 260px; /* Align with input */
             font-size: 0.8em;
             color: #aaa; /* Lighter grey for small text */
          }
         .calculateBtn { /* Generic button class */
             background-color: #1a1a1a; /* Dark background */
             color: #00ff00; /* Green text */
             padding: 10px 20px;
             border: 1px solid #00ff00; /* Green border */
             border-radius: 0px; /* Sharp corners */
             cursor: pointer;
             font-size: 1em;
             margin-top: 10px;
             font-weight: bold;
             transition: background-color 0.3s, color 0.3s;
         }
         .calculateBtn:hover,
         .calculateBtn.active-selector { /* Apply hover style to active selector */
             background-color: #00ff00; /* Green background */
             color: #0a0a0a; /* Dark text */
         }
         .calculator-results { /* Generic results class */
             margin-top: 20px;
             padding-top: 15px;
             border-top: 1px dashed #00ff00; /* Dashed green border */
         }
         .calculator-results h3 {
             margin-top: 0;
             color: #00ff00; /* Green results heading */
         }
         .calculator-results p {
             margin-bottom: 5px;
         }
         .calculator-results span {
             font-weight: bold;
         }
         /* Rebalancer specific */
         #investmentTable { width: 100%; border-collapse: collapse; margin-top: 15px; } /* Restored width: 100% */
         #investmentTable th, #investmentTable td { border: 1px solid #444; padding: 8px; text-align: left; }
         #investmentTable th { background-color: #333; color: #00ff00; }
         #investmentTable input[type="text"], #investmentTable input[type="number"] { width: 90%; background-color: #111; color: #e0e0e0; border: 1px solid #444; border-radius: 0px; padding: 6px; /* Added default border/padding */ }
         #investmentTable input[type="text"]:focus,
         #investmentTable input[type="number"]:focus {
             border-color: #00ff00; /* Green border on focus */
             outline: none; /* Remove default browser outline */
             box-shadow: 0 0 5px rgba(0, 255, 0, 0.5); /* Add subtle green glow on focus */
         }
         #investmentTable button { background-color: #1a1a1a; color: #ff4444; border: 1px solid #ff4444; padding: 3px 8px; cursor: pointer; border-radius: 0; transition: background-color 0.3s, color 0.3s; /* Adjusted remove button */ }
         #investmentTable button:hover { background-color: #ff4444; color: #1a1a1a; /* Red background, dark text on hover */ }
         .rebalanceAmount.positive { color: #00ff00; } /* Green for buy */
         .rebalanceAmount.negative { color: #ff4444; } /* Red for sell */
         .rebalanceAmount.neutral { color: #aaa; } /* Grey for hold */
         #rebalancer-summary p { margin: 5px 0; }
         #rebalancer-summary span { font-weight: bold; color: #00ff00; }
         #error-message { color: #ff4444; font-weight: bold; margin-top: 10px; }
        /* Responsive Navbar */
        @media (max-width: 768px) {
             .navbar .container {
                 /* flex-direction: column; Removed */
                 /* align-items: flex-start; Removed */
                 position: relative; /* Needed for absolute positioning of menu */
             }
             #hamburger-btn {
                 display: block; /* Show hamburger */
             }
             .navbar ul#nav-links {
                 display: none; /* Hide links by default */
                 flex-direction: column;
                 width: 100%;
                 position: absolute;
                 top: 100%; /* Position below navbar */
                 left: 0;
                 background-color: #1a1a1a; /* Match navbar background */
                 padding: 10px 0; /* Add some padding */
                 border-top: 1px solid #00ff00; /* Separator */
                 z-index: 100; /* Ensure menu is above content */
             }
             .navbar ul#nav-links.active {
                 display: flex; /* Show links when active */
             }
             .navbar ul#nav-links li {
                 margin-left: 0;
                 margin-bottom: 0; /* Remove bottom margin */
                 text-align: center;
                 width: 100%; /* Make list items full width */
             }
             .navbar ul#nav-links li a {
                 display: block; /* Make links take full width */
                 padding: 10px 0; /* Adjust padding */
                 border-bottom: 1px solid #333; /* Separator between links */
             }
             .navbar ul#nav-links li:last-child a {
                 border-bottom: none; /* Remove border from last link */
             }
        } /* Added missing closing brace for @media (max-width: 768px) */
        /* Extra brace removed */
        @media (max-width: 768px) { /* Added media query wrapper */
            /* --- Mobile-Specific Rebalancer Table Styles (Adapted from Reference) --- */

            /* Apply block display only to tbody elements and general tr/td */
            /* Apply block display to all relevant table elements */
            #investmentTable,
            #investmentTable thead,
            #investmentTable tbody,
            #investmentTable tfoot,
            #investmentTable th,
            #investmentTable td,
            #investmentTable tr {
                display: block;
            }

            /* Hide table headers (but not display: none;, for accessibility) */
            #investmentTable thead tr {
                position: absolute;
                top: -9999px;
                left: -9999px;
            }

            #investmentTable tr {
                border: 1px solid #444; /* Dark grey border */
                margin-bottom: 15px; /* Space out the "cards" */
            }
                 /* Rules moved to 600px media query below */

            #investmentTable td {
                /* Behave like a row item */
                border: none;
                border-bottom: 1px dashed #444; /* Dark dashed separator */
                position: relative;
                padding-left: 50%; /* Make space for the label */
                text-align: right; /* Align cell content to the right */
                min-height: 30px; /* Ensure cells have some height */
                display: flex; /* Use flex for better alignment */
                align-items: center; /* Vertically center content */
                justify-content: flex-end; /* Align content to the right */
            }
             #investmentTable tr td:last-child {
                 border-bottom: none; /* Remove border from last cell in row */
             }

            #investmentTable td:before {
                /* Now like a table header label */
                position: absolute;
                top: 50%;
                transform: translateY(-50%); /* Vertically center label */
                left: 10px;
                width: 45%; /* Reserve space for the label */
                padding-right: 10px;
                white-space: nowrap;
                text-align: left; /* Align label text to the left */
                font-weight: bold;
                content: attr(data-label); /* Use data-label attribute */
                color: #00ff00; /* Green label */
            }

            /* Add data-label attributes via CSS content */
            #investmentTable td:nth-of-type(1):before { content: "Symbol"; }
            #investmentTable td:nth-of-type(2):before { content: "Value ($)"; }
            #investmentTable td:nth-of-type(3):before { content: "Target (%)"; }
            #investmentTable td:nth-of-type(4):before { content: "Rebalance"; }
            #investmentTable td:nth-of-type(5):before { content: "Action"; }


            /* Style inputs within the mobile table cells */
            #investmentTable td input[type="number"],
            #investmentTable td input[type="text"] {
                width: 100%; /* Make inputs fill the cell space */
                text-align: right; /* Keep number alignment */
            }

            /* Center the remove button in its cell */
            #investmentTable td:nth-of-type(5) {
                padding-left: 10px; /* Reset padding */
                text-align: center;
                justify-content: center; /* Center button horizontally */
            }
            #investmentTable td:nth-of-type(5):before {
                /* Hide the label for the action button column if desired */
                content: ""; /* Hide label */
            }
            #investmentTable td:nth-of-type(5) button {
                width: auto; /* Let button size naturally */
                padding: 5px 10px; /* Adjust button padding */
                float: none; /* Remove float */
            }
            /* Footer styling for mobile */
            #investmentTable tfoot tr {
                border: none; /* No border for footer rows */
                margin-bottom: 0;
            }
            #investmentTable tfoot th {
                display: block; /* Make it block like other rows */
                width: 100%;   /* Take full width */
                box-sizing: border-box; /* Include padding/border in width */
                text-align: left;
                border-bottom: 1px solid #444;
                padding: 8px 10px;
                margin-bottom: 5px; /* Add some space below each footer row */
                /* overflow: hidden; Removed clearfix for float */
            }
            #investmentTable tfoot th span {
                /* float: right; Removed float */
                font-weight: normal;
                color: #e0e0e0;
            }
        } /* Closed @media (max-width: 768px) */

        /* @media (max-width: 600px) { */ /* Removed media query wrapper */
             .content-container {
                 padding: 15px;
             }
             h1 {
                 font-size: 1.8em;
             }
             h2 {
                 font-size: 1.3em;
             }
             /* Responsive Calculator */
              .calc-row label {
                 flex-basis: 100%; /* Stack label above input */
                 margin-bottom: 5px;
             }
              .calc-row small {
                  margin-left: 0; /* Reset margin */
              }
              /* Rebalancer specific responsive */
              /* #rebalancer-assets input { width: calc(100% - 90px); } */ /* Commented out as table structure changed */
              #investmentTable input[type="text"], #investmentTable input[type="number"] { width: 80%; } /* Adjust for smaller screens */

             /* Styles moved outside media query */
             #calculator-selector-container {
                 text-align: left; /* Align trigger button left */
             }
             #calculator-menu-trigger {
                 display: inline-block; /* Show trigger on mobile */
                 width: 100%; /* Make trigger full width */
                 text-align: center; /* Center text in trigger */
                 margin-bottom: 5px;
                 /* Inherits .calculateBtn styles */
             }
             #calculator-menu {
                 display: none; /* Hide menu by default on mobile */
                 position: absolute;
                 top: 100%; /* Position below trigger */
                 left: 0;
                 width: 100%;
                 background-color: #1a1a1a; /* Dark background for dropdown */
                 border: 1px solid #00ff00; /* Green border */
                 z-index: 50; /* Ensure it's above other content */
                 padding: 5px 0;
                 box-shadow: 0 4px 8px rgba(0, 255, 0, 0.2); /* Subtle green shadow */
             }
             #calculator-menu.active {
                 display: block; /* Show menu when active */
             }
             #calculator-menu .calculator-option {
                 display: block; /* Stack options vertically */
                 width: 100%;
                 margin: 0; /* Remove horizontal margin */
                 padding: 10px 15px; /* Padding for options */
                 text-align: left; /* Align text left */
                 border: none;
                 border-bottom: 1px solid #333; /* Separator */
                 border-radius: 0; /* Remove radius from base button style */
                 font-size: 1em; /* Reset font size */
                 /* Inherits .calculateBtn styles */
             }
              #calculator-menu .calculator-option:last-child {
                  border-bottom: none; /* Remove border from last item */
              }
             /* Style for the selected option in the dropdown */
             #calculator-menu .calculator-option.active-selector {
                 background-color: #00ff00; /* Green background */
                 color: #0a0a0a; /* Dark text */
                 cursor: default;
             }
             #calculator-selector-container {
                 text-align: left; /* Align trigger button left */
             }
             #calculator-menu-trigger {
                 display: inline-block; /* Show trigger on mobile */
                 width: 100%; /* Make trigger full width */
                 text-align: center; /* Center text in trigger */
                 margin-bottom: 5px;
             }
             #calculator-menu {
                 display: none; /* Hide menu by default on mobile */
                 position: absolute;
                 top: 100%; /* Position below trigger */
                 left: 0;
                 width: 100%;
                 background-color: #1a1a1a; /* Dark background for dropdown */
                 border: 1px solid #00ff00; /* Green border */
                 z-index: 50; /* Ensure it's above other content */
                 padding: 5px 0;
                 box-shadow: 0 4px 8px rgba(0, 255, 0, 0.2); /* Subtle green shadow */
             }
             #calculator-menu.active {
                 display: block; /* Show menu when active */
             }
             #calculator-menu .calculator-option {
                 display: block; /* Stack options vertically */
                 width: 100%;
                 margin: 0;
                 padding: 10px 15px; /* Padding for options */
                 text-align: left; /* Align text left */
                 border: none;
                 border-bottom: 1px solid #333; /* Separator */
                 border-radius: 0; /* Remove radius from base button style */
                 font-size: 1em; /* Reset font size */
             }
              #calculator-menu .calculator-option:last-child {
                  border-bottom: none; /* Remove border from last item */
              }
             /* Style for the selected option in the dropdown */
             #calculator-menu .calculator-option.active-selector {
                 background-color: #00ff00; /* Green background */
                 color: #0a0a0a; /* Dark text */
                 cursor: default;
             }
        /* } */ /* Removed closing brace for media query */
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container">
             <a href="index.html" class="logo">PassiveCash.xyz</a>
             <!-- Hamburger Button -->
             <button id="hamburger-btn" aria-label="Toggle Navigation Menu" aria-expanded="false">
                 <span class="bar"></span>
                 <span class="bar"></span>
                 <span class="bar"></span>
             </button>
             <!-- Navigation Links -->
            <ul id="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="calculators.html" class="active">Calculators</a></li>
                <li><a href="crypto.html">Crypto</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a href="disclaimer.html">Disclaimer</a></li>
            </ul>
        </div>
    </nav>

    <!-- Advertisement Bar -->
    <div id="advertisement"></div>

    <div class="content-container">

        <div id="calculator-selector-container"> <!-- Renamed container -->
            <!-- Trigger button for mobile -->
            <button id="calculator-menu-trigger" class="calculateBtn">Select Calculator ▼</button>

            <!-- Menu containing the actual buttons -->
            <div id="calculator-menu">
                 <button class="calculateBtn calculator-option" data-target="compound">Compound Interest</button>
                 <button class="calculateBtn calculator-option" data-target="rebalancer">Portfolio Rebalancer</button>
                 <button class="calculateBtn calculator-option" data-target="inflation">Inflation</button>
                 <button class="calculateBtn calculator-option" data-target="mortgage">Mortgage</button>
            </div>
        </div>

        <!-- Calculators -->
        <div id="compound" class="calculator-section calculator-content"> <!-- Updated ID, removed active -->
            <!-- Removed H2 Title -->
            <div id="compound-interest-calculator">
                <div class="calc-row">
                    <label for="capital">Initial Principal ($):</label>
                    <input type="number" id="capital" value="1000" onkeypress="return isNumberKeyCompound(event)">
                </div>
                <div class="calc-row">
                    <label for="myPercent">Annual Interest Rate (%):</label>
                    <input type="number" id="myPercent" value="5" onkeypress="return isNumberKeyCompound(event)">
                </div>
                <div class="calc-row">
                    <label for="lengthoftime">Investment Duration (Years):</label>
                    <input type="number" id="lengthoftime" value="10" onkeypress="return isNumberKeyCompound(event)">
                </div>
                <div class="calc-row">
                    <label for="contribution">Periodic Contribution/Withdrawal ($):</label>
                    <input type="number" id="contribution" value="100" onkeypress="return allowNegativeNumberCompound(event)">
                    <small>(Enter negative for withdrawal)</small>
                </div>
                <div class="calc-row">
                    <label for="compoundFrequency">Compounding & Contribution Frequency:</label>
                    <select id="compoundFrequency">
                        <option value="daily">Daily</option>
                        <option value="weekly">Weekly</option>
                        <option value="monthly" selected>Monthly</option>
                        <option value="quarterly">Quarterly</option>
                        <option value="yearly">Annually</option>
                    </select>
                </div>
                <button class="calculateBtn" onclick="calculateCompoundInterest()">Calculate</button>
                <div class="calculator-results">
                     <p id="output"></p> <!-- Changed to single output element -->
                </div>
            </div>
        </div>
        <div id="rebalancer" class="calculator-section calculator-content"> <!-- Updated ID -->
            <!-- Removed H2 Title -->
            <div class="rebalancer">
                <form id="portfolioForm">
                  <div class="calc-row"> <!-- Keep styling consistent -->
                    <label for="deposit">Deposit/Withdrawal ($):</label> <!-- Updated label -->
                    <input type="number" id="deposit" value="500" oninput="calculateRebalance()">
                    <small>(Enter negative for withdrawal)</small>
                  </div>
                  <br>
                  <div class="table-scroll-wrapper"> <!-- Added wrapper -->
                  <table id="investmentTable">
                    <thead>
                      <tr>
                        <th>Symbol</th>
                        <th>Current Value ($)</th> <!-- Updated header -->
                        <th>Target Allocation (%)</th> <!-- Updated header -->
                        <th>Rebalance Amount ($)</th> <!-- Updated header -->
                        <th>Action</th>
                      </tr>
                    </thead>
                    <tbody> <!-- Removed duplicate ID -->
                      <tr>
                        <td><input type="text" name="symbol" value="VT"></td>
                        <td><input type="number" name="value" value="5000" oninput="calculateRebalance()"></td>
                        <td><input type="number" name="allocation" value="60" oninput="calculateRebalance()"></td>
                        <td class="rebalanceAmount"></td>
                        <td><button type="button" onclick="removeInvestment(this)">Remove</button></td>
                      </tr>
                      <tr>
                        <td><input type="text" name="symbol" value="BNDW"></td>
                        <td><input type="number" name="value" value="3500" oninput="calculateRebalance()"></td>
                        <td><input type="number" name="allocation" value="40" oninput="calculateRebalance()"></td>
                        <td class="rebalanceAmount"></td>
                        <td><button type="button" onclick="removeInvestment(this)">Remove</button></td>
                      </tr>
                    </tbody>
                    <tfoot> <!-- Added tfoot for summary -->
                      <tr>
                        <th colspan="5"><span class="tfoot-label">Current Balance: </span><span id="currentBalance"></span></th>
                      </tr>
                      <tr>
                        <th colspan="5"><span class="tfoot-label">Target Balance: </span><span id="targetBalance"></span></th>
                      </tr>
                    </tfoot>
                  </table>
                  </div> <!-- Closed wrapper -->
                  <button type="button" class="calculateBtn" onclick="addInvestment()" style="margin-top: 15px;">Add Investment</button> <!-- Removed inline background-color -->
                   <div class="calculator-results"> <!-- Keep results div for error message -->
                     <p id="error-message" style="color: #ff4444; font-weight: bold; margin-top: 10px;"></p>
                  </div>
                </form>
            </div>
        </div>
        <div id="inflation" class="calculator-section calculator-content"> <!-- Updated ID -->
            <!-- Removed H2 Title -->
            <div id="inflation-calculator">
                <div class="calc-row">
                    <label for="dollarField">Start Amount ($):</label>
                    <input type="number" id="dollarField" value="1000" onkeypress="return isNumberKeyInflation(event)">
                </div>
                <div class="calc-row">
                    <label for="startYearField">Start Year:</label>
                    <input type="number" id="startYearField" value="2000" placeholder="e.g., 1980" onkeypress="return isNumberKeyInflation(event)">
                    <small>(Data typically available from ~1913 onwards)</small>
                </div>
                <div class="calc-row">
                    <label for="endYearField">End Year:</label>
                    <input type="number" id="endYearField" value="2024" placeholder="e.g., 2024" onkeypress="return isNumberKeyInflation(event)">
                </div>
                <button class="calculateBtn" onclick="calculateInflation()">Calculate Inflation Adjustment</button>
                <div class="calculator-results">
                     <p id="inflation-output"></p> <!-- Unique ID -->
                </div>
            </div>
        </div>
        <div id="mortgage" class="calculator-section calculator-content"> <!-- Updated ID -->
            <!-- Removed H2 Title -->
            <div id="mortgage-calculator">
                 <div class="calc-row">
                    <label for="homeValue">Home Value ($):</label>
                    <input type="number" id="homeValue" value="350000"> <!-- Added Home Value -->
                </div>
                 <div class="calc-row">
                    <label for="downPayment">Down Payment ($):</label>
                    <input type="number" id="downPayment" value="50000"> <!-- Added Down Payment -->
                </div>
                <div class="calc-row">
                    <label for="interestRate">Annual Interest Rate (%):</label>
                    <input type="number" id="interestRate" value="6.5">
                </div>
                <div class="calc-row">
                    <label for="loanTerm">Loan Term (Years):</label>
                    <input type="number" id="loanTerm" value="30">
                </div>
                 <div class="calc-row">
                    <label for="taxes">Annual Property Tax ($):</label>
                    <input type="number" id="taxes" value="4000">
                    <small>(Optional)</small>
                </div>
                 <div class="calc-row">
                    <label for="insurance">Annual Home Insurance ($):</label>
                    <input type="number" id="insurance" value="1200">
                    <small>(Optional)</small>
                </div>
                 <div class="calc-row">
                    <label for="pmi">Monthly PMI ($):</label> <!-- Assuming JS expects monthly, though label might imply rate -->
                    <input type="number" id="pmi" value="100">
                    <small>(Optional, if applicable)</small>
                </div>
                <button class="calculateBtn" onclick="calculateMortgage()">Calculate Monthly Payment</button>
                <div class="calculator-results">
                     <p id="mortgage-output"></p> <!-- Unique ID -->
                     <p id="mortgage-error" style="color: #ff4444;"></p> <!-- Unique ID -->
                </div>
            </div>
        </div>

    </div>

    <!-- Include jQuery -->
    <script src="js/jquery-3.6.0.min.js"></script>

    <!-- Calculator Switching Logic -->
    <script>
        $(document).ready(function() {
            const calculatorMenuTrigger = $('#calculator-menu-trigger');
            const calculatorMenu = $('#calculator-menu');
            const calculatorOptions = $('#calculator-menu .calculator-option'); // Target options within menu
            const calculatorSections = $('.calculator-content');

            // --- Toggle Mobile Menu ---
            calculatorMenuTrigger.on('click', function(e) {
                e.stopPropagation(); // Prevent click from closing menu immediately
                calculatorMenu.toggleClass('active');
                // Optional: Change arrow direction
                $(this).html(calculatorMenu.hasClass('active') ? 'Select Calculator ▲' : 'Select Calculator ▼');
            });

            // --- Close Mobile Menu if clicked outside ---
            $(document).on('click', function(e) {
                // Check if menu is active and the click was outside the container
                if (calculatorMenu.hasClass('active') && !$(e.target).closest('#calculator-selector-container').length) {
                    calculatorMenu.removeClass('active');
                    // Reset trigger text to the currently selected calculator name
                    const activeOptionText = calculatorOptions.filter('.active-selector').text() || 'Compound Interest'; // Default if none active somehow
                    calculatorMenuTrigger.html(activeOptionText + ' ▼');
                }
            });


            // --- Function to show a specific calculator ---
            function showCalculator(targetId) {
                // Remove # if present
                const cleanTargetId = targetId.startsWith('#') ? targetId.substring(1) : targetId;

                // Find the target section and button option
                const targetSection = $('#' + cleanTargetId);
                const targetOption = calculatorOptions.filter(`[data-target="${cleanTargetId}"]`);

                // If valid target found, show it
                if (targetSection.length && targetOption.length) {
                    calculatorSections.removeClass('active');
                    calculatorOptions.removeClass('active-selector'); // Target options
                    targetSection.addClass('active');
                    targetOption.addClass('active-selector'); // Target options

                    // Update trigger button text on mobile (optional, but helpful)
                    // Check if trigger is visible (i.e., we are on mobile)
                    if (calculatorMenuTrigger.is(':visible')) {
                         calculatorMenuTrigger.html(targetOption.text() + ' ▼'); // Update trigger text
                         calculatorMenu.removeClass('active'); // Close menu after selection
                    }

                } else {
                    // Default to compound if hash/target is invalid or not found
                    calculatorSections.removeClass('active');
                    calculatorOptions.removeClass('active-selector');
                    $('#compound').addClass('active');
                    const defaultOption = calculatorOptions.filter('[data-target="compound"]');
                    defaultOption.addClass('active-selector');
                     if (calculatorMenuTrigger.is(':visible')) {
                         calculatorMenuTrigger.html(defaultOption.text() + ' ▼'); // Update trigger text
                         calculatorMenu.removeClass('active');
                     }
                }
            }

            // --- Handle Hash on Page Load ---
            const initialHash = window.location.hash;
            if (initialHash) {
                showCalculator(initialHash);
            } else {
                // Default to compound if no hash
                showCalculator('compound');
            }

            // --- Handle Option Clicks ---
            calculatorOptions.on('click', function() { // Target options
                const targetId = $(this).data('target');
                showCalculator(targetId);
                // Update URL hash without causing page jump
                if (history.pushState) {
                    history.pushState(null, null, '#' + targetId);
                } else {
                    window.location.hash = '#' + targetId;
                }
            });

            // --- Initialize Calculators (assuming functions exist) ---
            // No init function needed for calculator.js as it uses onclick
            // No init function needed for rebalancer.js as it uses DOMContentLoaded and oninput
            // No init function needed for inflation_calculator.js as it uses onclick
            // No init function needed for mortgage.js as it uses onclick

        });
    </script>

    <!-- Hamburger Menu Script -->
    <script>
        const hamburgerBtn = document.getElementById('hamburger-btn');
        const navLinks = document.getElementById('nav-links');

        hamburgerBtn.addEventListener('click', () => {
            navLinks.classList.toggle('active');
            // Optional: Toggle ARIA attribute for accessibility
            const isExpanded = navLinks.classList.contains('active');
            hamburgerBtn.setAttribute('aria-expanded', isExpanded);
        });
    </script>

    <!-- Load Individual Calculator Scripts -->
    <script src="js/calculator.js"></script>
    <script src="js/inflation_calculator.js"></script>
    <script src="js/mortgage.js"></script>
    <script src="js/rebalancer.js"></script>
    <!-- Advertisement Script -->
    <script src="js/advertisement.js"></script>

</body>
</html>